There are several problems with NAT, such as not interacting with services like DHCP and tunneling. These can include misconfigured NAT inside, NAT outside, or ACLs. Other issues include interoperability with other network technologies, especially those that contain or derive information from host network addressing in the packet.

The figure summarizes common interoperability areas with NAT.

![[12.4.5.png]]

The table lists common interoperability areas with NAT.

| **Symptom**                            | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| -------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **BOOTP and DHCP**                     | - Both protocols manage the automatic assignment of IPv4 addresses to clients.<br>- Recall that the first packet that a new client sends is a DHCP-Request broadcast IPv4 packet.<br>- The DHCP-Request packet has a source IPv4 address of 0.0.0.0.<br>- Because NAT requires both a valid destination and source IPv4 address, BOOTP and DHCP can have difficulty operating over a router running either static or dynamic NAT.<br>- Configuring the IPv4 helper feature can help solve this problem. |
| **DNS**                                | - Because a router running dynamic NAT is changing the relationship between inside and outside addresses regularly as table entries expire and are recreated, a DNS server outside the NAT router does not have an accurate representation of the network inside the router.<br>- Configuring the IPv4 helper feature can help solve this problem.                                                                                                                                                      |
| **SNMP**                               | - Like DNS packets, NAT is unable to alter the addressing information stored in the data payload of the packet.<br>- Because of this, an SNMP management station on one side of a NAT router may not be able to contact SNMP agents on the other side of the NAT router.<br>- Configuring the IPv4 helper feature can help solve this problem.                                                                                                                                                          |
| **Tunneling and encryption protocols** | - Encryption and tunneling protocols often require that traffic be sourced from a specific UDP or TCP port, or use a protocol at the transport layer that cannot be processed by NAT.<br>- For example, IPsec tunneling protocols and generic routing encapsulation protocols used by VPN implementations cannot be processed by NAT.                                                                                                                                                                   |
